[package]
name = "rust_backend"
version = "0.1.0"
edition = "2021"
[lib]
path = "src/lib.rs"
crate-type = ["lib","cdylib"]

# ASIO requirements
[target.'cfg(target_os = "windows")'.dependencies]
cpal = { version = "0.15", features = ["asio"]}
[target.'cfg(not(target_os = "windows"))'.dependencies]
cpal = { version = "0.15"}

[dependencies]
ringbuf = "0.2"
assert_no_alloc = {version = "1.1", features = ["warn_debug"]}
fastrand = "1.8"
bit_mask_ring_buf = "0.5"
bencher = "0.1"
rustfft = "6.0"
realfft = "3.0"
no_denormals = { git = "https://github.com/Sin-tel/no_denormals.git" }
mlua = { version = "0.8", features = ["luajit", "module"] }

[profile.dev]
opt-level = 1
overflow-checks = false

[profile.release]
debug = 1 # for profiling
# lto = "thin"
# codegen-units = 1
# panic = "abort"
# enabling this flag will increase performance by a lot
# RUSTFLAGS="-C target-cpu=native" cargo build --release

[[bench]]
name = "bench"
harness = false
